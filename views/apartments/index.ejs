<% layout('layouts/boilerplate') %>
    <div id="cluster-map"></div>


    <h1 class="mt-3">All apartments</h1>

    <div class="dropdown mt-3 mb-3 text-end">
        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Sort by
        </button>
        <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/apartments?sortBy=priceAsc">Price: Low to high</a></li>
            <li><a class="dropdown-item" href="/apartments?sortBy=priceDesc">Price: High to low</a></li>
            <li><a class="dropdown-item" href="/apartments?sortBy=rating">Highest rating</a></li>
            <li><a class="dropdown-item" href="/apartments?sortBy=reviews">Most reviewed</a></li>
        </ul>
    </div>

    <div id="apartments-container"></div>


    <script src="/javascripts/apartmentRenderer.js"></script>
    <script>
        const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const apartments = { features: <%- JSON.stringify(apartments) %>};
        renderApartments();
    </script>

    <script src="/javascripts/clusterMap.js"></script>